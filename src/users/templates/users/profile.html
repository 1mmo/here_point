{% load static %}
{% load thumbnail %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title></title>
    <!-- bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
        crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
        crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
        crossorigin="anonymous"></script>


    <style>
        /* Monoserrat */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel&family=Montserrat:wght@100&display=swap');
        /* Roboto */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;700&display=swap');

        body, html {
            width: 100%;
            height: 100%;
            font-family: 'Roboto', sans-serif;
            color:black;    
        }

        #usericon {	
        }

        #logo {
            text-decoration:none;
            color: #2b2a2c;
            font-size: 30px;
            padding: 0px 0px 0px 25px;
            font-family: 'Cinzel', serif;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            /* position: relative; */
        }

        #logo:after {
            content: "";
            /* display: block; */
            width: 100%;
            height: 2px;
            background-color: #2B2A2C;
            bottom: -5;
            left: 0;
            z-index: 1;
        }

        .nav-link {
            /*padding: 10px 30px; */
            /*font-family: 'Open Sans Condensed', sans-serif;*/
            margin-left: 30px;
            position: relative;

            font-size: 18px;
            color: #2B2A2C;
            text-transform: uppercase;
            font-weight: 500;
            text-decoration: none;

            /*border: 2px solid transparent;*/
            /*border-radius: 20px;*/
        }

        .nav-link:hover {
            opacity: .5;
        }

        #user-place {
            transition: transform .1s linear;
        }

        #user-place:hover {
            transform: translateY(-5px);
        }

        .div-avatar {
            background-size: cover;
            border-radius: 50%;
            width: 100%;
            object-fit: cover;
        }

        .img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .show-div {
            background-color: red;
        }

        .places {
            transition: transform .1s linear;
        }

        .places:hover {
            transform: translateY(-5px);
        }
    </style>

</head>
<body background="{% static 'images/background.jpg' %}" style="background-size: cover; background-repeat: no-repeat; background-position: center center; background-attachment: fixed">
    <!-- Шапка -->
    <nav class="navbar navbar-expand-md navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" style="margin: 8px;" href="{% url 'main:index' %}" id="logo">HerePoint</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end me-3" id="navbarResponsive">
                <ul class="navbar-nav ml-auto" style="align-items: center">
                    <li class="nav-item active">
                        {% if user.is_authenticated %}
                        <a href="{% url 'users:profile_place_add' %}" class="nav-link active text-center">Добавить место</a>
                        {% else %} 
                        <a href="{% url 'users:login' %}" class="nav-link active text-center">Добавить место</a>
                        {% endif %}
                    </li>
                    <li class="nav-item active">
                        <img onclick="document.location='{% url 'users:profile' %}'" class="nav-link" src="{% static 'images/avatar_new.jpg' %}" width="60" height="60" alt="" style="border-radius: 50%;" id="usericon">
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <hr class="mt-0" style="opacity: 0.2">

    <!-- Тело -->
    <div class="container">
        <div class="row mt-5">
            <!-- Данные пользователя -->
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-7 col-xl-7">
                <div class="row mt-1 mb-2 text-center">
                    <span class="fs-2"><strong>Данные пользователя</strong></span>
                </div>
                <div class="row" style="align-items: center;">
                    <!-- Изображение -->
                    <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 col-xl-5">
                        <img src="{% static 'images/avatar_new.jpg' %}" class="div-avatar rounded-circle">
                    </div>
                    <!-- Поля -->
                    <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7 col-xl-7">
                        <div class="row" style="align-items: center">
                            <div class="col-4">
                                <label for="Email" class="fs-4">Email:</label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext fs-4" id="Email" value="{{ user.email }}">
                            </div>
                        </div>
                        <div class="row mt-1" style="align-items: center">
                            <div class="col-4">
                                <label for="Username" class="fs-4">Username:</label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext fs-4" id="Username" value="{{ user.username }}">
                            </div>
                        </div>
                        <div class="row mt-1" style="align-items: center">
                            <div class="col-4">
                                <label for="Name" class="fs-4">Name:</label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext fs-4" id="Name" value="{{ user.first_name }}">
                            </div>
                        </div>
                        <div class="row mt-1" style="align-items: center">
                            <div class="col-4">
                                <label for="Surname" class="fs-4">Surname:</label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext fs-4" id="Surname" value="{{ user.last_name }}">
                            </div>
                        </div>
                        <div class="row mt-1" style="align-items: center">
                            <div class="col-4">
                                <label for="City" class="fs-4">City:</label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext fs-4" id="City" value="City">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Кнопки -->
                <div class="row">
                    <button onclick="document.location='{% url 'users:profile_change' %}'" class="btn btn-outline-secondary mt-5 btn-lg">Редактировать профиль</button>	
                </div>
                <div class="row">
                    <button onclick="document.location='{% url 'users:logout' %}'" class="btn btn-outline-secondary mt-3 btn-lg ">Выйти</button>
                </div>
                <div class="row">
                    <button type="button" class="btn btn-outline-secondary mt-3 mb-5 btn-lg">Удалить аккаунт</button>
                </div>
            </div>
            <!-- Добавленные места -->
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-5 col-xl-5">
                <div class="row mt-1 mb-2 text-center">
                    <span class="fs-2"><strong>Добавленные места</strong></span>
                </div>
                {% if places %}
                <!-- Места -->
                    {% for place in places %}
                    <div class="container places">
                        <!-- Ссылка на место -->
                        {% with category=place.categories.all %}
                        {% for c in category %}
                        {% url 'main:detail' category_pk=c.pk pk=place.pk as url %}
                        <a href="{{ url }}{{ all }}" class="text-decoration-none" style="font-size: 15px; color: black">
                            <div class="row" style="align-items: center;">
                                <div class="col-xs-12 col-sm-12 col-md-7 col-lg-7 col-xl-7">
                                    <img class="img rounded" src="{% thumbnail place.image "300x300" %}">
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-5 col-lg-5 col-xl-5">
                                    <p class="mt-1 mb-1">{{ place.title }}</p>
                                    <hr style="margin: 0">
                                    <p class="mt-1 mb-1">{{ place.address }}</p>
                                    <hr style="margin: 0">
                                    <p class="mt-1 mb-1">Рейтинг: <span style="font-size:20px">4.7</span>/5</p>
                                </div>
                            </div>
                        </a>
                        {% endfor %}
                        {% endwith %}
                    </div>
                    <hr>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container-fluid" style="padding-top: 5em;"></div>
    </footer>
    <script>
        // .avatar-div height = width script
        var cw = $('.div-avatar').width();
        $('.div-avatar').css({'height':cw+'px'});

        // .img height = width / 2 script
        var newh = $('.img').width() / 2;
        $('.img').css({'height':newh+'px'});
    </script>
</body>
</html>  
